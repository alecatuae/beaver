"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    createRelationMap: function() {
        return createRelationMap;
    },
    getRelationMap: function() {
        return getRelationMap;
    }
});
const _core = require("@pothos/core");
const getRelationMap = (0, _core.createContextCache)((datamodel)=>createRelationMap(datamodel));
function createRelationMap({ models }) {
    const relationMap = new Map();
    if (Array.isArray(models)) {
        models.forEach((model)=>{
            relationMap.set(model.name, {
                model: model.name,
                relations: new Map()
            });
        });
        models.forEach((model)=>{
            const map = relationMap.get(model.name).relations;
            model.fields.forEach((field)=>{
                if (field.kind === 'object' && relationMap.has(field.type)) {
                    map.set(field.name, relationMap.get(field.type));
                }
            });
        });
    } else {
        Object.keys(models).forEach((name)=>{
            relationMap.set(name, {
                model: name,
                relations: new Map()
            });
        });
        Object.entries(models).forEach(([name, model])=>{
            const map = relationMap.get(name).relations;
            model.fields.forEach((field)=>{
                if (field.kind === 'object' && relationMap.has(field.type)) {
                    map.set(field.name, relationMap.get(field.type));
                }
            });
        });
    }
    return relationMap;
}

//# sourceMappingURL=relation-map.js.map